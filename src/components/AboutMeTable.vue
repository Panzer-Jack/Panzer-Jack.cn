<script setup lang="ts">
interface TableRow {
  tag?: string
  content: string
}

interface TableSubSection {
  subtitle: string
  rows: TableRow[]
}

type SectionItem = TableRow | TableSubSection

interface TableSection {
  title: string
  emoji: string
  color: string
  items: SectionItem[]
}

function isSubSection(item: SectionItem): item is TableSubSection {
  return 'subtitle' in item
}

const sections: TableSection[] = [
  {
    title: 'ACGN',
    emoji: 'ğŸŒ¸',
    color: '#ff6699',
    items: [
      {
        subtitle: 'è¿‘æœŸåœ¨è‚çš„',
        rows: [
          { tag: 'æ—®æ—¯', content: 'è‹ä¹‹å½¼æ–¹çš„å››é‡å¥ã€æ„›ä¸Šç«è»Š' },
          { tag: 'æ¼«ç”»', content: 'ã€Šæˆ‘é‚£é›£ä»¥å•Ÿé½’çš„ç¾æ¥åˆæˆ€ã€‹ï¼ˆä¼è¦‹å¸æœ€æ–°åŠ›ä½œï¼šæ€§è½‰Ã—éª¨ç§‘Ã—ç™¾åˆï¼‰' },
          { tag: 'JRPG', content: 'ç©ºã®è»Œè·¡ the 1st' },
          { tag: 'è¼•å°èªª', content: 'ã€Šæ±äº¬é—‡é´‰ã€‹' },
        ],
      },
      {
        subtitle: 'è€èˆ¹é•¿éå¸¸å–œæ¬¢çš„',
        rows: [
          { tag: 'ç•ªå‰§(A)', content: 'Steins;Gateã€åˆ€å‰‘ç¥åŸŸ' },
          { tag: 'æ¼«ç”»(C)', content: 'ã€Šå…³äºæˆ‘è½¬ç”Ÿå˜æˆå²è±å§†è¿™æ¡£äº‹ã€‹ã€ã€Šè½¬ç”Ÿè‹±é›„ä¹‹å¥³ã€‹' },
          { tag: 'æ—®æ—¯(G)', content: 'Steins;Gateã€æœˆã«å¯„ã‚Šãã†ä¹™å¥³ã®ä½œæ³•ç³»åˆ—ã€é‡‘è¾‰æ‹æ›²å››é‡å¥' },
          { tag: 'JRPG(G)', content: 'Aç¤¾å‡ºå“ï¼ˆEvenicleã€è˜­æ–¯ç³»åˆ—ï¼‰' },
          { tag: 'è¼•å°èªª(N)', content: 'ã€Šå–œæ­¡æ„›æƒ…å–œåŠ‡çš„ä¸»äººå…¬å—ï¼Ÿã€‹ã€ã€Šé»‘ä¹‹é­”ç‹ã€‹ã€ã€Šæ»¿æ‡·ç¾å¤¢çš„å°‘å¹´æ˜¯ç¾å¯¦ä¸»ç¾©è€…ã€‹ã€ã€Šæœ‰è°è§„å®šäº†ç°å®ä¸­ä¸èƒ½æœ‰æ‹çˆ±å–œå‰§çš„ï¼Ÿã€‹' },
        ],
      },
    ],
  },
  {
    title: 'åœ¨ç©ä»€ä¹ˆ',
    emoji: 'ğŸ®',
    color: '#4488ff',
    items: [
      {
        subtitle: 'æœ€è¿‘åœ¨æ‰“çš„',
        rows: [
          { tag: 'RTS', content: 'åœ°ç‹±ä¹‹é—¨ã€æˆ˜äº‰ä¹‹äºº2ã€è‹±é›„è¿3' },
          { tag: 'å¤§æˆ˜ç•¥', content: 'é’¢é“é›„å¿ƒ4ã€ç»´å¤šåˆ©äºš3' },
          { tag: 'å¼€æ”¾ä¸–ç•Œ', content: 'å¤©å›½æ‹¯æ•‘2' },
          { tag: 'FPS', content: 'æˆ˜åœ°é£äº‘6' },
          { tag: 'æ‰‹æ¸¸', content: 'BAï¼ˆè€å¹´äººæœ‰ç‚¹è‚ä¸åŠ¨äº†ï¼‰' },
        ],
      },
      {
        subtitle: 'é•¿æœŸå…³æ³¨çš„',
        rows: [
          { tag: 'RTS', content: 'æˆ˜äº‰ä¹‹äºº&çªå‡»å°é˜Ÿç³»åˆ—ã€è‹±é›„è¿ç³»åˆ—ã€çªè¢­ç³»åˆ—ï¼›ç­‰åç»­å‰§æƒ…DLC ingï¼šæ–­ç®­ã€é£æš´å´›èµ·' },
          { tag: 'å¤§æˆ˜ç•¥', content: 'Pç¤¾ï¼ˆé’¢é“é›„å¿ƒ&æ¬§é™†é£äº‘&ç»´å¤šåˆ©äºš&ç‹å›½é£äº‘ï¼‰' },
        ],
      },
    ],
  },
  {
    title: 'åœ¨å­¦ä»€ä¹ˆ',
    emoji: 'ğŸ’»',
    color: '#00d4aa',
    items: [
      { content: 'Â· è°ƒæ•™ LLM' },
      { content: 'Â· ç”µå­ç´ï¼ˆæ‰‹æ®‹åºŸï¼Œåˆ°ç°åœ¨éƒ½æ²¡å¼¹æ˜ç™½ï¼‰ã€å£ç´ï¼ˆé“ƒæœ¨ SCX-48ï¼‰' },
      { content: 'Â· æ‰‹ç»˜ï¼ˆè®¾å¤‡ï¼šWACOM CTL-672ï¼‰' },
      { content: 'Â· è‡ªå­¦æ—¥è¯­ing' },
    ],
  },
  {
    title: 'æœªæ¥è®¡åˆ’',
    emoji: 'ğŸ”®',
    color: '#ffaa44',
    items: [
      { tag: 'æƒ³å­¦', content: 'è€ƒé©¾ç…§' },
      { tag: 'æƒ³å­¦', content: 'æ—¥è¯­åˆ°èƒ½æ—¥å¸¸äº¤æµæ°´å¹³' },
      { tag: 'æƒ³åš', content: '26å¹´å¹´ä¸­ å‡†å¤‡æ•´ä¸ªæ—¥æœ¬é•¿æœŸç­¾è¯' },
      { tag: 'æƒ³åš', content: 'é€æ¸æ¢å¤å†™ä½œä¹ æƒ¯ï¼ˆå’ŒğŸ¦æœ¬æ€§æŠ—äº‰.JPG' },
      { tag: 'æƒ³å»', content: 'æ—¥æœ¬ã€åŒ—æ¬§' },
    ],
  },
]

function headerStyle(color: string) {
  return {
    background: `linear-gradient(135deg, ${color}20, ${color}08)`,
    borderLeft: `3px solid ${color}`,
    color,
  }
}

function subHeaderStyle(color: string) {
  return {
    borderLeft: `2px solid ${color}60`,
    color: `${color}cc`,
  }
}

function tagStyle(color: string) {
  return {
    background: `${color}18`,
    color,
    border: `1px solid ${color}30`,
  }
}
</script>

<template>
  <div class="about-table">
    <div
      v-for="(section, idx) in sections"
      :key="section.title"
      class="section"
      :class="{ 'mt-0': idx === 0 }"
    >
      <!-- åˆ†ç±»æ ‡é¢˜ -->
      <div
        class="section-header"
        :style="headerStyle(section.color)"
      >
        <span class="emoji">{{ section.emoji }}</span>
        <span class="title">{{ section.title }}</span>
      </div>

      <!-- éå† items -->
      <template
        v-for="(item, iIdx) in section.items"
        :key="iIdx"
      >
        <!-- å­åˆ†åŒº (å¸¦ subtitle + åµŒå¥— rows) -->
        <template v-if="isSubSection(item)">
          <div
            class="sub-header"
            :style="subHeaderStyle(section.color)"
          >
            {{ item.subtitle }}
          </div>
          <div
            v-for="(row, rIdx) in item.rows"
            :key="row.tag"
            class="section-row nested"
            :class="{ 'last-row': rIdx === item.rows.length - 1 }"
          >
            <span
              class="tag"
              :style="tagStyle(section.color)"
            >
              {{ row.tag }}
            </span>
            <span class="content">{{ row.content }}</span>
          </div>
        </template>

        <!-- æ™®é€šè¡Œ -->
        <div
          v-else
          class="section-row"
          :class="{ 'last-row': iIdx === section.items.length - 1 }"
        >
          <span
            v-if="item.tag"
            class="tag"
            :style="tagStyle(section.color)"
          >
            {{ item.tag }}
          </span>
          <span class="content">{{ item.content }}</span>
        </div>
      </template>
    </div>
  </div>
</template>

<style scoped>
.about-table {
  margin: 1.5em 0;
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid rgba(0, 212, 170, 0.12);
  background: rgba(10, 18, 26, 0.6);
}

.section {
  margin-top: 0;
}

.section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  font-weight: 700;
  font-size: 14px;
  font-family: 'special-common', sans-serif;
  letter-spacing: 1px;
}

.section-header .emoji {
  font-size: 16px;
}

.sub-header {
  padding: 6px 16px 6px 28px;
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 0.5px;
  background: rgba(255, 255, 255, 0.02);
}

.section-row {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 9px 16px;
  border-bottom: 1px solid rgba(0, 212, 170, 0.06);
  transition: background 0.2s ease;
}

.section-row.nested {
  padding-left: 28px;
}

.section-row:hover {
  background: rgba(0, 212, 170, 0.04);
}

.section-row.last-row {
  border-bottom: 1px solid rgba(0, 212, 170, 0.1);
}

.tag {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 56px;
  padding: 2px 10px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 600;
  white-space: nowrap;
  flex-shrink: 0;
}

.content {
  font-size: 12px;
  color: #8ba8a8;
  line-height: 1.6;
}
</style>
